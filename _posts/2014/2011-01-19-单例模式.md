---
layout: post
title: 单例模式：世界唯一的妳
description: 

---

OO程序设计中，有些对象我们只需要一个，例如注册表、线程池、缓存、驱动对象等。如果产生了多个实例，可能导致程序的行为异常、资源使用不一致等问题。

单例模式的定义：确保一个类只有一个实例，并提供一个全局访问点。

如何只创建一个MyClass类的对象 ?  

* 因为我们需要类的唯一实例
* 如果公有化构造器，类就能够被外界实例化多次
* 如果私有化构造器，则必须有MyClass类的实例才能够调用MyClass构造器，但是因为没有其他类能够实例化MyClass，所以我们得不到这样的实例，这是一个“先有鸡还是先有蛋的问题”。

##经典的单件模式实现：

{% highlight java %}
public class Singleton {
    private static Singleton uniqueInstance;

    private Singleton() {
    }

    public static Singleton getInstance() {
        if (uniqueInstance == null) {
            // 如果我们不需要这个实例，它就永远不会产生。这是“延迟实例化”的效果。
            // 代码此处存在线程同步问题，如果两个线程依次通过了条件判断，则会出现返回两个不同对象的情况。
            uniqueInstance = new Singleton();
        }
        return uniqueInstance;
    }
}
{% endhighlight %}

我们可以利用静态变量来记录Singleton类的唯一实例，直接通过类名调用静态方法getInstance()实例化对象，并返回这个实例。

##处理多线程





