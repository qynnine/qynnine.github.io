<!DOCTYPE html>
<html id="J-html" class="">
<head>
     <!--
     **
     * Author:         掌心
     * Contact:        zhanxin.info@gmail.com
     * Theme Name:     iLotus
     **
    -->
    <link rel="stylesheet" href=" /assets/highlight/pygments.css">
    <meta charset="UTF-8" />
    <title>
        
            单例模式：世界唯一的妳
        
    </title>
    <meta name="generator" content="Jekyll" />
    <meta name="author" content="Nie Jia" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" media="all" href="http://niejia.org/static/style.css" />
    <!--[if lt IE 9]>
    <script src="http://niejia.org/static/js/html5.js" type="text/javascript"></script>
    <![endif]-->
    <script src="http://niejia.org/static/js/jquery.js" type="text/javascript"></script>
</head>
<body itemscope itemtype="http://schema.org/WebPage" class="home blog lotus index">
    <nav class="lotus-nav">
        <ul>
            
            
            
            
            
                
            
            <li class="home ">
                <a href="/index.html" rel="bookmark" title="首页">
                    <i class="icon-home"></i>
                </a>
                
            </li>
            
            
            
            
            
            <li class="">
                <a href="/archives.html" rel="bookmark" title="文章归档">
                    <i class="icon-reorder"></i>
                </a>
                
            </li>
            
            
            
            
            
            <li class="">
                <a href="/contact.html" rel="bookmark" title="关于我">
                    <i class="icon-envelope-alt"></i>
                </a>
                
            </li>
            
            
            
            
            
            <li class="">
                <a href="/wishlist.html" rel="bookmark" title="WishList">
                    <i class="icon-heart"></i>
                </a>
                
            </li>
            
            
            
            
            
            <li class="">
                <a href="https://github.com/qynnine" rel="bookmark" title="GitHub">
                    <i class="icon-github"></i>
                </a>
                
            </li>
            
        </ul>
    </nav>

    <p class="lotus-breadcrub">
    <a href="http://niejia.org/index.html" rel="nofollow" rel="nofollow" title="首页">Home</a>
    <span> &gt; </span>
    <a href="http://niejia.org/archives.html" rel="nofollow" >Archives</a>
    <span> &gt; </span>
    单例模式：世界唯一的妳
</p>
<h1 class="lotus-pagetit">单例模式：世界唯一的妳</h1>
<p class="lotus-meta">Publish: <time class="date" pubdate="January 19, 2011">January 19, 2011</time></p>
<article  itemscope itemtype="http://schema.org/Article" class="lotus-post">
<p>OO程序设计中，有些对象我们只需要一个，例如注册表、线程池、缓存、驱动对象等。如果产生了多个实例，可能导致程序的行为异常、资源使用不一致等问题。</p>

<p>单例模式的定义：确保一个类只有一个实例，并提供一个全局访问点。</p>

<p>如何只创建一个MyClass类的对象 ?</p>

<ul>
<li>因为我们需要类的唯一实例</li>
<li>如果公有化构造器，类就能够被外界实例化多次</li>
<li>如果私有化构造器，则必须有MyClass类的实例才能够调用MyClass构造器，但是因为没有其他类能够实例化MyClass，所以我们得不到这样的实例，这是一个“先有鸡还是先有蛋的问题”。</li>
</ul>


<h2>经典的单件模式实现：</h2>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Singleton</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="n">Singleton</span> <span class="n">uniqueInstance</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nf">Singleton</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Singleton</span> <span class="nf">getInstance</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">uniqueInstance</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// 如果我们不需要这个实例，它就永远不会产生。这是“延迟实例化”的效果。</span>
            <span class="c1">// 代码此处存在线程同步问题，如果两个线程依次通过了条件判断，则会出现返回两个不同对象的情况。</span>
            <span class="n">uniqueInstance</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Singleton</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">uniqueInstance</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></div>


<p>我们可以利用静态变量来记录Singleton类的唯一实例，直接通过类名调用静态方法getInstance()实例化对象，并返回这个实例。</p>

<h2>处理多线程</h2>

</article>
<p class="lotus-anno">声明: 本文采用 <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="nofollow" target="_blank" title="自由转载-非商用-非衍生-保持署名">BY-NC-SA</a> 授权。转载请注明转自: <a href="" title="" rel="nofollow">Nie Jia</a></p>
<section class="lotus-nextpage fn-clear">
    
    
    <div class="lotus-nextpage-right"><a class="next" href="/2014/09/17/C%E9%A3%8E%E6%A0%BC%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2.html" rel="next">C风格字符串&nbsp;&raquo;</a></div>
    
</section>

<div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'niejia'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

<footer class="lotus-footer">
	<p>Copyright © 2010–2014 Nie Jia's Blog All rights reserved. Design by <a href="http://www.zhanxin.info" target="_blank">zhanxin</a>.</p>
</footer>
<script src="http://niejia.org/static/js/jquery.scrollTo.js" type="text/javascript"></script>
<script src="http://niejia.org/static/js/iLotus.js" type="text/javascript"></script>

</body>
</html>